---
export interface Product {
  name: string;
  image: string;
  rating: number;
  price: string;
  pros: string[];
  cons: string[];
  amazonUrl: string;
  bestFor: string;
}

export interface Props {
  products: Product[];
  title?: string;
}

const { products, title = "Product Comparison" } = Astro.props;
---

<div class="product-comparison bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
  <div class="bg-gradient-to-r from-primary-50 to-accent-50 px-6 py-4">
    <h3 class="text-xl font-bold text-gray-900">{title}</h3>
  </div>
  
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Product</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rating</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Best For</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pros & Cons</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        {products.map((product, index) => (
          <tr class={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center">
                <img class="h-16 w-16 rounded-lg object-cover" src={product.image} alt={product.name} loading="lazy" />
                <div class="ml-4">
                  <div class="text-sm font-medium text-gray-900">{product.name}</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center">
                <div class="flex items-center">
                  {Array.from({ length: 5 }, (_, i) => (
                    <svg 
                      key={i}
                      class={`w-4 h-4 ${i < Math.floor(product.rating) ? 'text-yellow-400' : 'text-gray-300'}`}
                      fill="currentColor" 
                      viewBox="0 0 20 20"
                    >
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                  ))}
                </div>
                <span class="ml-2 text-sm text-gray-600">{product.rating}/5</span>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="text-lg font-semibold text-accent-600">{product.price}</div>
            </td>
            <td class="px-6 py-4">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800">
                {product.bestFor}
              </span>
            </td>
            <td class="px-6 py-4">
              <div class="space-y-2">
                <div>
                  <h5 class="text-xs font-medium text-green-600 mb-1">Pros:</h5>
                  <ul class="text-xs text-gray-600 space-y-1">
                    {product.pros.slice(0, 2).map(pro => (
                      <li class="flex items-start">
                        <span class="text-green-500 mr-1">✓</span>
                        {pro}
                      </li>
                    ))}
                  </ul>
                </div>
                <div>
                  <h5 class="text-xs font-medium text-red-600 mb-1">Cons:</h5>
                  <ul class="text-xs text-gray-600 space-y-1">
                    {product.cons.slice(0, 2).map(con => (
                      <li class="flex items-start">
                        <span class="text-red-500 mr-1">✗</span>
                        {con}
                      </li>
                    ))}
                  </ul>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <a 
                href="#"
                target="_blank"
                rel="nofollow noopener"
                class="amazon-btn-inline text-sm"
                onclick="alert('Amazon link will be added when product is reviewed'); return false;"
              >
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 8.206 3.183 13.697 3.183 4.674 0 8.955-1.004 12.844-3.008.187-.093.348-.053.484.124.045.062.009.152-.1.205-4.33 2.395-9.037 3.589-14.123 3.589-5.849 0-11.312-1.596-15.612-4.787-.121-.09-.16-.18-.538-.284zm1.757-2.03c-.138-.32.024-.73.36-.91 7.365-4.05 19.35-4.05 26.716 0 .335.18.497.59.36.91-.046.108-.194.126-.33.04-6.698-4.244-17.134-4.244-23.832 0-.136.086-.284.068-.33-.04z"/>
                </svg>
                Coming Soon
              </a>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>
</div>

<style>
  @media (max-width: 768px) {
    .product-comparison table {
      font-size: 0.875rem;
    }
    
    .product-comparison td {
      padding: 0.75rem 0.5rem;
    }
  }
</style>