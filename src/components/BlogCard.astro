---
export interface Props {
  title: string;
  description: string;
  image: string;
  url: string;
  category: string;
  date: string;
  readingTime: number;
  featured?: boolean;
}

const { title, description, image, url, category, date, readingTime, featured = false } = Astro.props;

const formattedDate = new Date(date).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<article class={`card group ${featured ? 'md:col-span-2 md:row-span-2' : ''}`}>
  <div class="relative overflow-hidden">
    <img 
      src={image} 
      alt={title}
      class={`w-full object-cover transition-transform duration-300 group-hover:scale-105 ${featured ? 'h-64 md:h-80' : 'h-48'}`}
      loading="lazy"
    >
    <div class="absolute top-4 left-4">
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-600 text-white">
        {category}
      </span>
    </div>
  </div>
  
  <div class={`p-6 ${featured ? 'md:p-8' : ''}`}>
    <div class="flex items-center text-sm text-gray-500 mb-3">
      <time datetime={date}>{formattedDate}</time>
      <span class="mx-2">â€¢</span>
      <span>{readingTime} min read</span>
    </div>
    
    <h3 class={`font-bold text-gray-900 mb-3 group-hover:text-primary-600 transition-colors ${featured ? 'text-2xl md:text-3xl' : 'text-xl'}`}>
      <a href={url} class="hover:underline">
        {title}
      </a>
    </h3>
    
    <p class={`text-gray-600 mb-4 line-clamp-3 ${featured ? 'text-lg' : ''}`}>
      {description}
    </p>
    
    <div class="mb-4">
      <a 
        href={url}
        class="inline-flex items-center text-primary-600 hover:text-primary-700 font-medium text-sm transition-colors"
      >
        Read More
        <svg class="w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
    
    <!-- Sample Amazon button for demo -->
    <div class="pt-4 border-t border-gray-100">
    <a 
        href="#"
        target="_blank"
        rel="nofollow noopener"
        class="amazon-btn-inline text-xs"
        onclick="alert('Amazon link will be added when product is reviewed'); return false;"
    >
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 8.206 3.183 13.697 3.183 4.674 0 8.955-1.004 12.844-3.008.187-.093.348-.053.484.124.045.062.009.152-.1.205-4.33 2.395-9.037 3.589-14.123 3.589-5.849 0-11.312-1.596-15.612-4.787-.121-.09-.16-.18-.538-.284zm1.757-2.03c-.138-.32.024-.73.36-.91 7.365-4.05 19.35-4.05 26.716 0 .335.18.497.59.36.91-.046.108-.194.126-.33.04-6.698-4.244-17.134-4.244-23.832 0-.136.086-.284.068-.33-.04z"/>
        </svg>
        <span>Coming Soon</span>
        <svg class="w-2 h-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
      </svg>
    </a>
    </div>
  </div>
</article>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>